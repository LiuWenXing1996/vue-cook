<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" type="image/svg+xml" href="/vue-cook/logo.svg"><title>自定义交互面板 | VueCook</title><meta name="description" content="基于vue的低代码平台辅助工具">
    <link rel="modulepreload" href="/vue-cook/assets/app.8fafd536.js"><link rel="modulepreload" href="/vue-cook/assets/custom-panel.html.7b06d262.js"><link rel="modulepreload" href="/vue-cook/assets/custom-panel.html.1ffb86a4.js">
    <link rel="stylesheet" href="/vue-cook/assets/style.66bffd0f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vue-cook/" class=""><!----><span class="site-name can-hide">VueCook</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/vue-cook/guide/" class="nav-link router-link-active" aria-label="指引"><!--[--><!--]--> 指引 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vue-cook/api/components" class="nav-link" aria-label="Apis"><!--[--><!--]--> Apis <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vue-cook/demos" class="nav-link" aria-label="示例"><!--[--><!--]--> 示例 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vue-cook/thanks-list" class="nav-link" aria-label="致谢"><!--[--><!--]--> 致谢 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/LiuWenXing1996/vue-cook/blob/main/CHANGELOG.md" rel="noopener noreferrer" target="_blank" aria-label="更新日志"><!--[--><!--]--> 更新日志 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/LiuWenXing1996/vue-cook" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/vue-cook/guide/" class="nav-link router-link-active" aria-label="指引"><!--[--><!--]--> 指引 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vue-cook/api/components" class="nav-link" aria-label="Apis"><!--[--><!--]--> Apis <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vue-cook/demos" class="nav-link" aria-label="示例"><!--[--><!--]--> 示例 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vue-cook/thanks-list" class="nav-link" aria-label="致谢"><!--[--><!--]--> 致谢 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/LiuWenXing1996/vue-cook/blob/main/CHANGELOG.md" rel="noopener noreferrer" target="_blank" aria-label="更新日志"><!--[--><!--]--> 更新日志 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/LiuWenXing1996/vue-cook" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">指引</p><ul class=""><li><!--[--><a href="/vue-cook/guide/why.html" class="nav-link sidebar-item" aria-label="为什么选VueCook"><!--[--><!--]--> 为什么选VueCook <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/guide/" class="nav-link router-link-active sidebar-item" aria-label="开始"><!--[--><!--]--> 开始 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/guide/custom-component.html" class="nav-link sidebar-item" aria-label="自定义组件"><!--[--><!--]--> 自定义组件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/guide/custom-logic.html" class="nav-link sidebar-item" aria-label="自定义逻辑"><!--[--><!--]--> 自定义逻辑 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/vue-cook/guide/custom-panel.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="自定义交互面板"><!--[--><!--]--> 自定义交互面板 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/vue-cook/guide/custom-panel.html#定义面板" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="定义面板"><!--[--><!--]--> 定义面板 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/vue-cook/guide/custom-panel.html#自定义编辑器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="自定义编辑器"><!--[--><!--]--> 自定义编辑器 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/vue-cook/guide/custom-panel.html#颜色选择器面板" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="颜色选择器面板"><!--[--><!--]--> 颜色选择器面板 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/vue-cook/guide/custom-panel.html#组件拖拽添加面板" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="组件拖拽添加面板"><!--[--><!--]--> 组件拖拽添加面板 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/vue-cook/guide/custom-panel.html#逻辑拖拽添加面板" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="逻辑拖拽添加面板"><!--[--><!--]--> 逻辑拖拽添加面板 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/vue-cook/guide/custom-panel.html#自定义资源面板" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="自定义资源面板"><!--[--><!--]--> 自定义资源面板 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/vue-cook/guide/custom-panel.html#编程控制面板开关" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="编程控制面板开关"><!--[--><!--]--> 编程控制面板开关 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/vue-cook/guide/data-save-and-use.html" class="nav-link sidebar-item" aria-label="编辑数据的保存和使用"><!--[--><!--]--> 编辑数据的保存和使用 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">深入</p><ul class=""><li><!--[--><a href="/vue-cook/advanced/component-render-principle.html" class="nav-link sidebar-item" aria-label="组件渲染机制"><!--[--><!--]--> 组件渲染机制 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/advanced/component-picker-principle.html" class="nav-link sidebar-item" aria-label="组件拾取机制"><!--[--><!--]--> 组件拾取机制 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/advanced/logic-run-principle.html" class="nav-link sidebar-item" aria-label="逻辑运行机制"><!--[--><!--]--> 逻辑运行机制 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/advanced/panel-load-principle.html" class="nav-link sidebar-item" aria-label="面板加载机制"><!--[--><!--]--> 面板加载机制 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Apis</p><ul class=""><li><!--[--><a href="/vue-cook/api/components.html" class="nav-link sidebar-item" aria-label="组件"><!--[--><!--]--> 组件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/api/built-in.html" class="nav-link sidebar-item" aria-label="内置资源"><!--[--><!--]--> 内置资源 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/api/hooks.html" class="nav-link sidebar-item" aria-label="钩子"><!--[--><!--]--> 钩子 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue-cook/api/utils.html" class="nav-link sidebar-item" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="自定义交互面板" tabindex="-1"><a class="header-anchor" href="#自定义交互面板" aria-hidden="true">#</a> 自定义交互面板</h1><p>可以通过<code>definePanelMaker</code>这个工具函数自定义交互面板资源。</p><h2 id="定义面板" tabindex="-1"><a class="header-anchor" href="#定义面板" aria-hidden="true">#</a> 定义面板</h2><p>一个最简单的交互面板如下：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// SimplePanelMaker.ts</span>
<span class="token keyword">import</span> definePanelMaker <span class="token keyword">from</span> <span class="token string">&#39;@/utils/definePanelMaker&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">definePanelMaker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;简单面板&quot;</span><span class="token punctuation">,</span>
    pkg<span class="token operator">:</span> <span class="token string">&quot;test-pkg&quot;</span><span class="token punctuation">,</span>
    defaultSplitLayoutPaneName<span class="token operator">:</span> <span class="token string">&quot;right&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">make</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>
            <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>
            <span class="token string">&#39;我是一个简单面板&#39;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>打开<a href="/vue-cook/demos/custom-panel" target="_blank"><!--[-->示例页面-自定义交互面板<!--]--></a>，可以在最下方的<code>资源面板</code>中找到新增加<code>简单面板</code>，点击<code>简单面板</code>，会看到面板在右侧被打开。可以通过<code>defaultSplitLayoutPaneName</code>来控制面板被打开的位置，有<code>left</code>、<code>center</code>、<code>right</code>、<code>bottom</code></p><h2 id="自定义编辑器" tabindex="-1"><a class="header-anchor" href="#自定义编辑器" aria-hidden="true">#</a> 自定义编辑器</h2><p>可以自定义编辑器来更好辅助<code>组件</code>和<code>逻辑</code>的属性配置，</p><h3 id="颜色选择器面板" tabindex="-1"><a class="header-anchor" href="#颜色选择器面板" aria-hidden="true">#</a> 颜色选择器面板</h3><p>以自定义一个颜色选择器为例</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>// ColorPanel.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>config<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>colorString<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>请选择组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useComponentSelected<span class="token punctuation">,</span> ICookEditorState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-cook&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cookEditorState <span class="token operator">=</span> inject<span class="token operator">&lt;</span>ICookEditorState<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;cookEditorState&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ICookEditorState
<span class="token keyword">const</span> selectedComponent <span class="token operator">=</span> <span class="token function">useComponentSelected</span><span class="token punctuation">(</span>cookEditorState<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> colorString <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> config<span class="token punctuation">.</span>value<span class="token operator">?.</span>props<span class="token operator">?.</span>color<span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            config<span class="token punctuation">.</span>value<span class="token punctuation">.</span>props <span class="token operator">=</span> config<span class="token punctuation">.</span>value<span class="token punctuation">.</span>props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            config<span class="token punctuation">.</span>value<span class="token punctuation">.</span>props<span class="token punctuation">.</span>color <span class="token operator">=</span> value <span class="token operator">||</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> selectedComponent<span class="token punctuation">.</span>value<span class="token operator">?.</span>component
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>创建一个带颜色配置的按钮组件</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>// Button.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>color-btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我是可以配置颜色的按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    color<span class="token operator">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.color-btn</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// ButtonMaker.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponentMaker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-cook&#39;</span>
<span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">&quot;./Button.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponentMaker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;按钮&quot;</span><span class="token punctuation">,</span>
    pkg<span class="token operator">:</span> <span class="token string">&quot;test-pkg&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">makePropOptions</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">make</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Button
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>打开<a href="/vue-cook/demos/custom-panel-with-color-input" target="_blank"><!--[-->示例页面-自定义颜色编辑器<!--]--></a>，按照以下步骤，使用此面板</p><ul><li>创建一个带按钮的页面</li><li>从资源面板中打开<code>颜色选择器面板</code></li><li>选中按钮</li><li>在颜色选择器面板中选取颜色，可以看到按钮的颜色发生了改变</li></ul><h3 id="组件拖拽添加面板" tabindex="-1"><a class="header-anchor" href="#组件拖拽添加面板" aria-hidden="true">#</a> 组件拖拽添加面板</h3><p>VueCook提供了<code>&lt;component-dragger&gt;</code>，可以很方便的实现<code>组件拖拽添加</code>这个功能</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>// ComponentDraggerPanel.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>config<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotOption in slotOptions<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ slotOption }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-dragger</span> <span class="token attr-name">@drop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleComponentDrop($event, slotOption)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>拖拽组件到此处添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-dragger</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>componentConfig in getSlotData(slotOption)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-bottom</span><span class="token punctuation">:</span>3px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>uid:{{ componentConfig.uid }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>name:{{ componentConfig.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>del(slotOption, componentConfig)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>请选择组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useComponentSelected<span class="token punctuation">,</span> ICookEditorState<span class="token punctuation">,</span> ComponentDragger<span class="token punctuation">,</span> useSlotOptions<span class="token punctuation">,</span> IComponentConfig<span class="token punctuation">,</span> addComponentConfig<span class="token punctuation">,</span> removeComponentConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-cook&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cookEditorState <span class="token operator">=</span> inject<span class="token operator">&lt;</span>ICookEditorState<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;cookEditorState&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ICookEditorState
<span class="token keyword">const</span> selectedComponent <span class="token operator">=</span> <span class="token function">useComponentSelected</span><span class="token punctuation">(</span>cookEditorState<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> selectedComponent<span class="token punctuation">.</span>value<span class="token operator">?.</span>component
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> slotOptions <span class="token operator">=</span> <span class="token function">useSlotOptions</span><span class="token punctuation">(</span>cookEditorState<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">del</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">slotName<span class="token operator">:</span> string<span class="token punctuation">,</span> componentConfig<span class="token operator">:</span> IComponentConfig</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">removeComponentConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>value<span class="token punctuation">,</span> componentConfig<span class="token punctuation">.</span>uid<span class="token punctuation">,</span> slotName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleComponentDrop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">componentConfig<span class="token operator">:</span> IComponentConfig<span class="token punctuation">,</span> slotName<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">addComponentConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>value<span class="token punctuation">,</span> componentConfig<span class="token punctuation">,</span> slotName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">getSlotData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">slotName<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> config<span class="token punctuation">.</span>value<span class="token operator">?.</span>slots<span class="token operator">?.</span><span class="token punctuation">[</span>slotName<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>打开<a href="/vue-cook/demos/custom-panel-with-component-dragger" target="_blank"><!--[-->示例页面-自定义组件拖拽添加面板<!--]--></a>，按照以下步骤，使用此面板</p><ul><li>创建一个带按钮的页面,选中按钮</li><li>从资源面板中打开<code>组件拖拽添加面板</code></li><li>可以看到它识别到了按钮组件拥有的插槽配置，并且每个插槽配置后面都带了一个框，上面写着<code>拖拽组件到此处添加</code></li><li>将资源面板中的emoji图标组件拖入，可以看到图标正常显示在按钮组件上</li><li>点击删除按钮可以将添加的图标组件删除</li></ul><h3 id="逻辑拖拽添加面板" tabindex="-1"><a class="header-anchor" href="#逻辑拖拽添加面板" aria-hidden="true">#</a> 逻辑拖拽添加面板</h3><p>VueCook提供了<code>&lt;logic-dragger&gt;</code>，可以很方便的实现<code>逻辑拖拽添加</code>这个功能</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>// ComponentDraggerPanel.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>config<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logic-dragger</span> <span class="token attr-name">@drop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleLogicDrop($event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>fetch:拖拽逻辑到此处添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logic-dragger</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>请选择组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useComponentSelected<span class="token punctuation">,</span> ICookEditorState<span class="token punctuation">,</span> LogicDragger<span class="token punctuation">,</span> ILogicConfig<span class="token punctuation">,</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-cook&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cookEditorState <span class="token operator">=</span> inject<span class="token operator">&lt;</span>ICookEditorState<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;cookEditorState&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ICookEditorState
<span class="token keyword">const</span> selectedComponent <span class="token operator">=</span> <span class="token function">useComponentSelected</span><span class="token punctuation">(</span>cookEditorState<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> selectedComponent<span class="token punctuation">.</span>value<span class="token operator">?.</span>component
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleLogicDrop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">logicConfig<span class="token operator">:</span> ILogicConfig</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> configValue <span class="token operator">=</span> config<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>configValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    configValue<span class="token punctuation">.</span>props <span class="token operator">=</span> configValue<span class="token operator">?.</span>props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    configValue<span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">&quot;fetch&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>logicConfig<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>打开<a href="/vue-cook/demos/custom-panel-with-logic-dragger" target="_blank"><!--[-->示例页面-自定义逻辑拖拽添加面板<!--]--></a>，按照以下步骤，使用此面板</p><ul><li>创建一个带表格的页面，选中表格组件</li><li>从资源面板中打开<code>逻辑拖拽添加面板</code></li><li>可以看到它显示了一个框，上面写着<code>fetch:拖拽逻辑到此处添加</code></li><li>将资源面板中的fetch逻辑拖入，页面中的表格组件的按钮文字变成了<code>点我获取数据</code></li><li>关闭选中模式，点击按钮，稍等片刻，可以看到数据加载成功</li></ul><h3 id="自定义资源面板" tabindex="-1"><a class="header-anchor" href="#自定义资源面板" aria-hidden="true">#</a> 自定义资源面板</h3><p>VueCook提供了<code>&lt;resource-maker&gt;</code>，可以很方便的在实现一个<code>资源面板</code>的同时，具有<code>组件拖拽</code>、<code>逻辑拖拽</code>以及<code>面板点击打开</code>功能</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>// ResourcePanel.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource-maker</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maker in makerList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:maker</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maker<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource-maker</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ResourceMaker<span class="token punctuation">,</span> ICookEditorState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-cook&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cookEditorState <span class="token operator">=</span> inject<span class="token operator">&lt;</span>ICookEditorState<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;cookEditorState&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ICookEditorState
<span class="token keyword">const</span> makerList <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> cookEditorState<span class="token punctuation">.</span>makerList
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>打开<a href="/vue-cook/demos/custom-panel-with-resource-panel" target="_blank"><!--[-->示例页面-自定义自定义资源面板<!--]--></a>，按照以下步骤，使用此面板</p><ul><li>创建一个新页面，选中新页面</li><li>从资源面板中打开<code>自定义资源面板</code>，可以看到它将所有的资源都列了出来</li><li>从<code>自定义资源面板</code>拖拽表格组件到新页面的<code>default</code>插槽里，可以看到表格被正常添加</li><li>选中页面中的表格组件，从<code>自定义资源面板</code>拖拽Fetch逻辑到它的<code>fetch</code>属性中，可以看到页面中的表格组件的按钮文字变成<code>点我获取数据</code></li><li>关闭选中模式，点击按钮，稍等片刻，可以看到数据加载成功</li></ul><h2 id="编程控制面板开关" tabindex="-1"><a class="header-anchor" href="#编程控制面板开关" aria-hidden="true">#</a> 编程控制面板开关</h2><p>有的时候需要通过代码来控制面板的开关，可以通过<code>layoutAddTab</code>和<code>layoutRemoveTab</code>来打开和关闭面板</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>openPanel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>打开面板<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>closePanel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关闭自己<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ICookEditorState<span class="token punctuation">,</span> usePanelMaker<span class="token punctuation">,</span> makeDefaultPanelConfig<span class="token punctuation">,</span> layoutAddTab<span class="token punctuation">,</span> layoutRemoveTab<span class="token punctuation">,</span> IPanelConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-cook&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    panelConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> Object <span class="token keyword">as</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> IPanelConfig<span class="token punctuation">,</span>
        required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> panelConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
<span class="token keyword">const</span> cookEditorState <span class="token operator">=</span> inject<span class="token operator">&lt;</span>ICookEditorState<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;cookEditorState&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ICookEditorState
<span class="token keyword">const</span> <span class="token function-variable function">openPanel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> maker <span class="token operator">=</span> <span class="token function">usePanelMaker</span><span class="token punctuation">(</span>cookEditorState<span class="token punctuation">,</span> <span class="token string">&quot;开关面板&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test-pkg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value
    <span class="token keyword">if</span> <span class="token punctuation">(</span>maker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> panelConfig <span class="token operator">=</span> <span class="token function">makeDefaultPanelConfig</span><span class="token punctuation">(</span>maker<span class="token punctuation">)</span>
        <span class="token function">layoutAddTab</span><span class="token punctuation">(</span>cookEditorState<span class="token punctuation">,</span> panelConfig<span class="token punctuation">,</span> <span class="token string">&quot;right&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">closePanel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">layoutRemoveTab</span><span class="token punctuation">(</span>cookEditorState<span class="token punctuation">,</span> panelConfig<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>在PanelMaker中使用<code>defineComponent</code>传入Vue组件需要的props</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> definePanelMaker <span class="token keyword">from</span> <span class="token string">&#39;@/utils/definePanelMaker&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TogglePanel <span class="token keyword">from</span> <span class="token string">&#39;./TogglePanel.vue&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">definePanelMaker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;开关面板&quot;</span><span class="token punctuation">,</span>
    pkg<span class="token operator">:</span> <span class="token string">&quot;test-pkg&quot;</span><span class="token punctuation">,</span>
    defaultSplitLayoutPaneName<span class="token operator">:</span> <span class="token string">&quot;right&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">make</span><span class="token operator">:</span> <span class="token punctuation">(</span>cookEditorState<span class="token punctuation">,</span> panelConfig<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>
            TogglePanel<span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                panelConfig
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>打开<a href="/vue-cook/demos/custom-panel-with-toggle" target="_blank"><!--[-->示例页面-编程控制面板开关<!--]--></a>，执行以下步骤，</p><ul><li>从资源面板中打开<code>开关面板</code></li><li>点击<code>开关面板</code>中的<code>打开面板</code>按钮，打开另一个面板</li><li>点击<code>开关面板</code>中的<code>关闭自身</code>按钮，关闭面板自身</li></ul><p>更多<code>definePanelMaker</code>的参数，参考<a href="/vue-cook/api/utils.html#definepanelmaker" class=""><code>definePanelMaker</code></a></p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/LiuWenXing1996/vue-cook/edit/main/docs/guide/custom-panel.md" rel="noopener noreferrer" target="_blank" aria-label="为此页提供修改建议"><!--[--><!--]--> 为此页提供修改建议 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">11/14/2021, 10:08:28 AM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: lwx_redstone@163.com">柳问星</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/vue-cook/guide/custom-logic.html" class="nav-link" aria-label="自定义逻辑"><!--[--><!--]--> 自定义逻辑 <!--[--><!--]--></a></span><span class="next"><a href="/vue-cook/guide/data-save-and-use.html" class="nav-link" aria-label="编辑数据的保存和使用"><!--[--><!--]--> 编辑数据的保存和使用 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/vue-cook/assets/app.8fafd536.js" defer></script>
  </body>
</html>
